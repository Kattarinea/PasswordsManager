# PasswordsManager
Приложение для мобильного устройства на базе ОС «Android», позволяющее пользователю безопасно хранить пароли от различных ресурсов.

При запуске приложения пользователю требуется ввести пароль. При первом запуске приложения пользователь задает пароль, которым будет далее пользоваться для входа. Введенный пароль сохраняется на телефон в файл password.txt в шифрованном виде. Ключом шифрования выступает сам пароль, а в качестве алгоритма шифрования выбран DES.

Для шифрования данных был реализован класс Crypt, в котором имеются отдельно функции шифрования/расшифрования пароля и функции шифрования/расшифрования базы данных. Отличие данных функций состоит в том, что функции шифрования/расшифрования базы данных на вход принимают два файла: входной и выходной файл. Когда требуется выгрузить базу данных или загрузить базу из файла, создается временный файл test.txt, в котором будет храниться копия базы. Данный файл будет поступать в функции EncryptFile/ DecryptFile в качестве входного/выходного файла.

В функции EncryptFile создается переменная типа Cipher, инициализируется модом, ключом и синхропосылкой. В качестве ключа шифрования базы данных используется введенный ранее пользователем пароль. Синхропасылка случайно генерируется для нового пароля. Создается переменная FileInputStream inS и переменная CipherOutputStream outS. В outS кладется new CipherOutputStream(new FileOutputStream(file_out),c). Далее вызывается функция записи в файл. Аналогичным образом реализована функция DecryptFile.

Для activity с паролем использовалась готовый модуль. В файл build.grable было добавлено следующее: implementation 'com.github.sangzn34: PasscodeView:1.0.3'. Также был исправлен файл settings.grable.

![image](https://github.com/Kattarinea/PasswordsManager/assets/65298723/9d8bf1ef-c36a-42fc-a116-416d7e06b685)

Для хранения каждой записи используется CardView. Все CardView лежат в списке RecyclerView, для которого был реализован Adapter. Данный список инициализируется с использованием serviceArrayList, куда при вызове метода dbHandler.readService() заносятся данные из базы. В классе Adapter реализованы обработчики нажатий на элементы списка. При долгом нажатии на поле пароля, он появляется в открытом виде.  Для RecyclerView был реализован обработчик swipe. При смахивании элемента вправо, пользователю предоставляется возможность удалить этот элемент.

![image](https://github.com/Kattarinea/PasswordsManager/assets/65298723/6e3d4f4b-bf25-4af6-8898-c8877cf52f8f)

![image](https://github.com/Kattarinea/PasswordsManager/assets/65298723/9162f09b-e3c3-4da1-b2c8-453e13534166)

Для добавления нового сервиса необходимо нажать на кнопку «+». После появляется activity, где пользователю необходимо занести данные по новому сервису. Если пользователь пытается добавить в базу данных запись с Service URL уже существующим, то всплывает сообщение о том, что запись с таким сервисом уже существует и ее нужно обновить. Для обновления записи достаточно просто нажать на элемент списка. Появится окно, схожее с окном добавления новой записи. При долгом нажатии на поле пароля, происходит его копирование в буфер обмена.

Пользователь может выгрузить базу данных (импортировать) в файл, который будет шифроваться, или загрузить базу в приложение (экспортировать). Также пользователь может сменить свой пароль. При смене пароля меняется ключ шифрования базы данных. При вводе нового пароля происходит запоминание старого пароля. С использованием старого пароля файл с базой данных расшифровывается и зашифровывается с использованием нового пароля. Кроме паролей потребовалось запоминать и старый синхропосылки. 

![image](https://github.com/Kattarinea/PasswordsManager/assets/65298723/2e16eafc-649e-4861-9f82-9a124ecb2a6f)

Для работы с базой данных был написан класс Base, в котором были реализованы методы addNewService – добавление новой записи, readService – чтение базы данных, deleteAll – удаление всех записей, updateService – обновление записи, CheckIsDataAlreadyInDBorNot – проверка на наличие записи с таким названием, deleteService – удаление конкретной записи.
